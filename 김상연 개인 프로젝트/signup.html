<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
  <link rel="stylesheet" href="css/signup.css">
</head>

<body>
  <h1>회원가입 페이지</h1>
  <div id="container">
    <a href="login.html">뒤로 가기</a>
    <section>
      <fieldset>
        <legend>회원 정보</legend>
        <ul>
          <li>
            <label for="id">계정아이디</label>
            <input type="text" id="id" name="id" autofocus placeholder="아이디를 입력하세요">
          </li>
          <li>
            <label for="nickname">닉네임</label>
            <input type="text" id="nickname" name="nickname" placeholder="닉네임을 입력하세요">
          </li>
          <li>
            <label for="pw">비밀번호</label>
            <input type="password" id="pw" name="pw" placeholder="비밀번호를 입력하세요">
          </li>
          <li>
            <label for="pwc">비밀번호 확인</label>
            <input type="password" id="pwc" name="pwc" placeholder="비밀번호를 입력하세요">
          </li>
        </ul>
      </fieldset>
      <fieldset>
        <button class="signup">회원 가입</button>
      </fieldset>
    </section>

  </div>
  <footer>
    <h4>전체서비스 이용약관 개인정보처리방침 © movie Corp.</h4>
  </footer>

  <script>
    let memberData = JSON.parse(localStorage.getItem('memberData'));

    document.querySelector('.signup').addEventListener('click', (e) => {
      let id = document.querySelector('#id').value;
      let name = document.querySelector('#nickname').value;
      let pw = document.querySelector('#pw').value;
      let pwc = document.querySelector('#pwc').value;
      let isOk = true;
      memberData.forEach(element => {
        if (element.id == id) {
          isOk = false;
        }}); 
        if (isOk == false){alert("중복된 아이디 입니다."); isOk = true; return; }
        if (pw != pwc) {
          isOk = false;
        } if (isOk == false){alert("입력한 비밀번호가 다릅니다."); isOk = true; return;}
        if (id == "") {
          isOk = false;
        } if (isOk == false){alert("아이디를 입력하세요."); isOk = true; return;}
        if (name == "") {
          isOk = false;
        } if (isOk == false){alert("닉네임을 입력하세요."); isOk = true; return;}
        if (pw == "") {
          isOk = false;
        } if (isOk == false){alert("비밀번호를 입력하세요."); isOk = true; return;}
        else{
          memberData.push({
            id: id,
            pw: pw,
            name: name
          });
        }
        localStorage.setItem('memberData', JSON.stringify(memberData));
        location.href = "login.html"
      });
    
  </script>
</body>

</html>